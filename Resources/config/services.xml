<?xml version="1.0" encoding="UTF-8"?>
<container xmlns="http://www.symfony-project.org/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.symfony-project.org/schema/dic/services http://www.symfony-project.org/schema/dic/services/services-1.0.xsd">

	<parameters>
		<parameter key="request.class">Bundle\WebServiceBundle\Soap\SoapRequest</parameter>
		
		<parameter key="webservice.definition.class">Bundle\WebServiceBundle\ServiceDefinition\ServiceDefinition</parameter>
		<parameter key="webservice.definition.loader.class">Bundle\WebServiceBundle\ServiceDefinition\Loader\XmlFileLoader</parameter>
		<parameter key="webservice.definition.dumper.class">Bundle\WebServiceBundle\ServiceDefinition\Dumper\Wsdl11DocumentLiteralFileDumper</parameter>
	</parameters>
	
	<services>
		<!-- redefine FrameworkBundle 'http_kernel' service with different id -->
        <service id="symfony_http_kernel" class="%http_kernel.class%">
            <argument type="service" id="event_dispatcher" />
            <argument type="service" id="controller_resolver" />
        </service>
        
		<service id="webservice.kernel" class="Bundle\WebServiceBundle\SoapKernel">
            <argument type="service" id="webservice.definition" />
            <argument type="service" id="webservice.definition.loader" />
            <argument type="service" id="webservice.definition.dumper" />
            
            <argument type="service" id="symfony_http_kernel" />
		</service>
		<service id="webservice.definition" class="%webservice.definition.class%" shared="true">
			<argument type="string">%webservice.definition.name%</argument>
		</service>
		<service id="webservice.definition.loader" class="%webservice.definition.loader.class%">
			<argument type="string">%webservice.definition.resource%</argument>
		</service>
		<service id="webservice.definition.dumper" class="%webservice.definition.dumper.class%">
			<argument type="string"></argument>
		</service>
	</services>
</container>